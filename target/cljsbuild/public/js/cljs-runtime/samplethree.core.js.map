{"version":3,"sources":["samplethree/core.cljs"],"mappings":"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","names":["samplethree.core/nav-link","uri","title","page","cljs.core/deref","cljs.core._EQ_","re_frame.core.subscribe","samplethree.core/navbar","with-let56466","reagent.ratom/with-let-values","temp__5739__auto__","reagent.ratom/*ratom-context*","c__54083__auto__","reagent.debug/has-console","reagent.debug/tracking","reagent.debug/track-console","js/console","init56467","res__54084__auto__","expanded?","reagent.core.atom","cljs.core.swap_BANG_","cljs.core/not","samplethree.core/ops","samplethree.core/equals","samplethree.core/handler","x","cljs.core.prn","re-frame.core/dispatch","samplethree.core/math","p1__56468#","ajax.core.POST","cljs.core.get","samplethree.core/do-math","num","G__56470","fexpr__56469","samplethree.core/make-calc-btns","samplethree.core/make-calc","cljs.core.map","cljs.core.range","samplethree.core/home-page","samplethree.core/page","temp__5733__auto__","samplethree.core/navigate!","match","_","samplethree.core/router","reitit.core.router","samplethree.core/start-router!","reitit.frontend.easy/start!","samplethree.core/mount-components","re-frame.core/clear-subscription-cache!","reagent.dom.render","js/document","samplethree.core/init!","samplethree.ajax/load-interceptors!","re-frame.core/dispatch-sync"],"sourcesContent":["(ns samplethree.core\r\n  (:require\r\n    [ajax.core :refer [GET POST]]\r\n    [day8.re-frame.http-fx]\r\n    [reagent.dom :as rdom]\r\n    [reagent.core :as r]\r\n    [re-frame.core :as rf]\r\n    [goog.events :as events]\r\n    [goog.history.EventType :as HistoryEventType]\r\n    [markdown.core :refer [md->html]]\r\n    [samplethree.ajax :as ajax]\r\n    [samplethree.events]\r\n    [reitit.core :as reitit]\r\n    [reitit.frontend.easy :as rfe]\r\n    [clojure.string :as string])\r\n  (:import goog.History))\r\n\r\n(defn nav-link [uri title page]\r\n  [:a.navbar-item\r\n   {:href   uri\r\n    :class (when (= page @(rf/subscribe [:common/page])) :is-active)}\r\n   title])\r\n\r\n(defn navbar [] \r\n  (r/with-let [expanded? (r/atom false)]\r\n              [:nav.navbar.is-info>div.container\r\n               [:div.navbar-brand\r\n                [:a.navbar-item {:href \"/\" :style {:font-weight :bold}} \"samplethree\"]\r\n                [:span.navbar-burger.burger\r\n                 {:data-target :nav-menu\r\n                  :on-click #(swap! expanded? not)\r\n                  :class (when @expanded? :is-active)}\r\n                 [:span][:span][:span]]]\r\n               [:div#nav-menu.navbar-menu\r\n                {:class (when @expanded? :is-active)}\r\n                [:div.navbar-start\r\n                 [nav-link \"#/\" \"Home\" :home]]]]))\r\n\r\n\r\n ;;(def calc-atom (r/atom {:x nil :y nil :result nil :op nil :color \"#90EE90\"}))\r\n (def ops {\"+\" \"plus\", \"-\" \"minus\", \"*\" \"multiply\", \"/\" \"divide\"})\r\n (def equals \"\")\r\n\r\n\r\n ;;(defn color [ref]\r\n ;;  (let [x (-> @ref :result)]\r\n ;;    (cond\r\n ;;      (< x 20) (swap! ref assoc :color \"#90EE90\")\r\n ;;      (< x 50) (swap! ref assoc :color \"#ADD8E6\")\r\n ;;      :else  (swap! ref assoc :color \"#FFA07A\"))))\r\n\r\n\r\n (defn handler [x]\r\n   (prn \"in handler\" x)\r\n   (rf/dispatch[:set-key :result x])\r\n   (rf/dispatch[:color x]))\r\n\r\n\r\n (defn math []\r\n   (prn \"in math :x\" @(rf/subscribe[:get-value :x]) \" :y \" @(rf/subscribe[:get-value :y]))\r\n        (POST (str \"/api/math/\" (get ops @(rf/subscribe[:get-value :op])))\r\n         {:headers {\"Accept\" \"application/transit+json\"}\r\n          :params {:x @(rf/subscribe[:get-value :x]) :y @(rf/subscribe[:get-value :y])}\r\n          :handler #(handler (:total %))}))\r\n\r\n\r\n (defn do-math [num]\r\n   ((cond\r\n      (and (= 0 @(rf/subscribe[:get-value :x]))\r\n           (= 0 @(rf/subscribe[:get-value :result])))\r\n      (do (rf/dispatch [:set-key :x num]) (set! equals \" = \"))\r\n\r\n      (and (= 0 @(rf/subscribe[:get-value :y]))\r\n           (= 0 @(rf/subscribe[:get-value :result])))\r\n      (rf/dispatch [:set-key :y num])\r\n\r\n      :default (do (rf/dispatch [:set-key :x @(rf/subscribe[:get-value :result])])\r\n                   (rf/dispatch [:set-key :y num])))\r\n    (math)))\r\n\r\n\r\n (defn make-calc-btns [num]\r\n   [:button.button\r\n    {:class \"button is-info\"\r\n     :key num\r\n     :on-click #(do-math num)}\r\n    num])\r\n\r\n\r\n (defn make-calc []\r\n   [:div#calc-btns (map make-calc-btns (range 1 10))])\r\n\r\n\r\n(defn home-page []\r\n     [:section.section>div.container>div.content\r\n      [:div.calc-size\r\n       (make-calc)\r\n       ;;[:button\r\n       ;; {:class \"button is-info\"\r\n       ;;  :name \"EQUALS\"\r\n       ;;  :on-click #(rf/dispatch[:equals])} \"=\"]\r\n       [:button\r\n        {:class \"button is-info\"\r\n         :name \"RESET\"\r\n         :key \"RESET\"\r\n         :on-click #(rf/dispatch [:reset])} \"RESET!\"]\r\n       [:button.button\r\n        {:class \"button is-primary\"\r\n         :key \"plus\"\r\n         :on-click #(rf/dispatch [:set-key :op \"+\"])} \"+\"]\r\n       [:button.button\r\n        {:class \"button is-primary\"\r\n         :key \"minus\"\r\n         :on-click #(rf/dispatch [:set-key :op \"-\"])} \"-\"]\r\n       [:button.button\r\n        {:class \"button is-primary\"\r\n         :key \"multiply\"\r\n         :on-click #(rf/dispatch [:set-key :op \"*\"])} \"*\"]\r\n       [:button.button\r\n        {:class \"button is-primary\"\r\n         :key \"divide\"\r\n         :on-click #(rf/dispatch [:set-key :op \"/\"])} \"/\"]\r\n       [:br]\r\n       [:span.calc-size.numbers {:style {:color @(rf/subscribe[:get-color])} }\r\n       ;; @(rf/subscribe[:equation])\r\n        ]]])\r\n\r\n\r\n(defn page []\r\n  (if-let [page @(rf/subscribe [:common/page])]\r\n    [:div\r\n     [navbar]\r\n     [page]]))\r\n\r\n(defn navigate! [match _]\r\n  (rf/dispatch [:common/navigate match]))\r\n\r\n(def router\r\n  (reitit/router\r\n    [[\"/\" {:name        :home\r\n           :view        #'home-page}]]))\r\n\r\n(defn start-router! []\r\n  (rfe/start!\r\n    router\r\n    navigate!\r\n    {}))\r\n\r\n;; -------------------------\r\n;; Initialize app\r\n(defn ^:dev/after-load mount-components []\r\n  (rf/clear-subscription-cache!)\r\n  (rdom/render [#'page] (.getElementById js/document \"app\")))\r\n\r\n(defn init! []\r\n  (start-router!)\r\n  (ajax/load-interceptors!)\r\n  (rf/dispatch-sync [:initialize])\r\n  (mount-components))\r\n"]}